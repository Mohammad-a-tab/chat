"use strict";(self.webpackChunkchat=self.webpackChunkchat||[]).push([[509],{51622:(e,t,r)=>{r.d(t,{Z:()=>j});r(72791);var n=r(64554),i=r(84697),s=r(53767),a=r(93044),o=r(20890),c=r(66934),l=r(13967),d=r(12065),p=r(59434),h=r(84360),x=r(80184);const u=(0,c.ZP)(n.Z)((e=>{let{theme:t}=e;return{"&:hover":{cursor:"pointer"}}})),g=(0,c.ZP)(i.Z)((e=>{let{theme:t}=e;return{"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:`0 0 0 2px ${t.palette.background.paper}`,"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}})),j=e=>{let{img:t,name:r,msg:n,time:c,unread:j,online:m,id:Z}=e;const b=(0,p.I0)(),{room_id:f}=(0,p.v9)((e=>e.app)),v=null===f||void 0===f?void 0:f.toString();let w=+v===Z;v||(w=!1);const C=(0,l.Z)();return(0,x.jsx)(u,{onClick:()=>{b((0,h.ND)({room_id:Z}))},sx:{width:"100%",borderRadius:1,backgroundColor:w?"light"===C.palette.mode?(0,d.Fq)(C.palette.primary.main,.5):C.palette.primary.main:"light"===C.palette.mode?"#fff":C.palette.background.paper},p:2,children:(0,x.jsxs)(s.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,x.jsxs)(s.Z,{direction:"row",spacing:2,children:[" ",m?(0,x.jsx)(g,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,x.jsx)(a.Z,{alt:r,src:t})}):(0,x.jsx)(a.Z,{alt:r,src:t}),(0,x.jsxs)(s.Z,{spacing:.3,children:[(0,x.jsx)(o.Z,{variant:"subtitle2",children:r}),(0,x.jsx)(o.Z,{variant:"caption",children:(k=n,I=20,(null===k||void 0===k?void 0:k.length)>I?`${null===k||void 0===k?void 0:k.slice(0,I)}...`:k)})]})]}),(0,x.jsxs)(s.Z,{spacing:2,alignItems:"center",children:[(0,x.jsx)(o.Z,{sx:{fontWeight:600},variant:"caption",children:c}),(0,x.jsx)(i.Z,{className:"unread-count",color:"primary",badgeContent:j})]})]})});var k,I}},53614:(e,t,r)=>{r.d(t,{ol:()=>s,cB:()=>a,el:()=>c});var n=r(66934),i=r(12065);const s=(0,n.ZP)("div")((e=>{let{theme:t}=e;return{position:"relative",borderRadius:20,backgroundColor:(0,i.Fq)(t.palette.background.paper,1),marginRight:t.spacing(2),marginLeft:0,width:"100%"}})),a=(0,n.ZP)("div")((e=>{let{theme:t}=e;return{padding:t.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}));var o=r(4834);const c=(0,n.ZP)(o.ZP)((e=>{let{theme:t}=e;return{color:"inherit","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:`calc(1em + ${t.spacing(4)})`,width:"100%"}}}))},23787:(e,t,r)=>{r.r(t),r.d(t,{default:()=>K});var n=r(72791),i=r(64554),s=r(53767),a=r(20890),o=r(13400),c=r(36151),l=r(94721),d=r(90662),p=r(9593),h=r(40703),x=r(6991),u=r(27578),g=r(13967),j=r(29998),m=r(6842),Z=r(53935),b=r(80184);const f=()=>{const e=(0,g.Z)(),[t,r]=n.useState(0);return(0,b.jsx)(i.Z,{sx:{zIndex:10,position:"absolute",bottom:0,width:"100vw",backgroundColor:e.palette.background.paper,boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.25)"},children:(0,b.jsxs)(s.Z,{sx:{width:"100%"},direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,p:2,children:[Z.u5.map((n=>n.index===t?(0,b.jsx)(i.Z,{sx:{backgroundColor:e.palette.primary.main,borderRadius:1.5},p:1,children:(0,b.jsx)(o.Z,{sx:{width:"max-content",color:"#ffffff"},children:n.icon})}):(0,b.jsx)(o.Z,{onClick:()=>{var e;e=n.index,r(e)},sx:{width:"max-content",color:"light"===e.palette.mode?"#080707":e.palette.text.primary},children:n.icon}))),(0,b.jsx)(m.Z,{})]})})};var v=r(51622),w=r(53614),C=r(55931),k=r(5289),I=r(25228),y=r(43896),_=r(39157),R=r(59434),S=r(84360),F=r(84697),q=r(93044),$=r(66934),P=r(53687),N=r(8250);const E=window.localStorage.getItem("user_id"),W=(0,$.ZP)(i.Z)((e=>{let{theme:t}=e;return{"&:hover":{cursor:"pointer"}}})),z=(0,$.ZP)(F.Z)((e=>{let{theme:t}=e;return{"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:`0 0 0 2px ${t.palette.background.paper}`,"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}})),B=e=>{let{img:t,firstName:r,lastName:n,online:i,_id:o}=e;const l=(0,g.Z)(),d=`${r} ${n}`;return(0,b.jsx)(W,{sx:{width:"100%",borderRadius:1,backgroundColor:l.palette.background.paper},p:2,children:(0,b.jsxs)(s.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,b.jsxs)(s.Z,{direction:"row",alignItems:"center",spacing:2,children:[" ",i?(0,b.jsx)(z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,b.jsx)(q.Z,{alt:d,src:t})}):(0,b.jsx)(q.Z,{alt:d,src:t}),(0,b.jsx)(s.Z,{spacing:.3,children:(0,b.jsx)(a.Z,{variant:"subtitle2",children:d})})]}),(0,b.jsx)(s.Z,{direction:"row",spacing:2,alignItems:"center",children:(0,b.jsx)(c.Z,{onClick:()=>{N.W.emit("friend_request",{to:o,from:E},(()=>{alert("request sent")}))},children:"Send Request"})})]})})},O=e=>{let{img:t,firstName:r,lastName:n,incoming:i,missed:o,online:l,id:d}=e;const p=(0,g.Z)(),h=`${r} ${n}`;return(0,b.jsx)(W,{sx:{width:"100%",borderRadius:1,backgroundColor:p.palette.background.paper},p:2,children:(0,b.jsxs)(s.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,b.jsxs)(s.Z,{direction:"row",alignItems:"center",spacing:2,children:[" ",l?(0,b.jsx)(z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,b.jsx)(q.Z,{alt:h,src:t})}):(0,b.jsx)(q.Z,{alt:h,src:t}),(0,b.jsx)(s.Z,{spacing:.3,children:(0,b.jsx)(a.Z,{variant:"subtitle2",children:h})})]}),(0,b.jsx)(s.Z,{direction:"row",spacing:2,alignItems:"center",children:(0,b.jsx)(c.Z,{onClick:()=>{N.W.emit("accept_request",{request_id:d})},children:"Accept Request"})})]})})},A=e=>{let{img:t,firstName:r,lastName:n,incoming:i,missed:c,online:l,_id:d}=e;const p=(0,g.Z)(),h=`${r} ${n}`;return(0,b.jsx)(W,{sx:{width:"100%",borderRadius:1,backgroundColor:p.palette.background.paper},p:2,children:(0,b.jsxs)(s.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,b.jsxs)(s.Z,{direction:"row",alignItems:"center",spacing:2,children:[" ",l?(0,b.jsx)(z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,b.jsx)(q.Z,{alt:h,src:t})}):(0,b.jsx)(q.Z,{alt:h,src:t}),(0,b.jsx)(s.Z,{spacing:.3,children:(0,b.jsx)(a.Z,{variant:"subtitle2",children:h})})]}),(0,b.jsx)(s.Z,{direction:"row",spacing:2,alignItems:"center",children:(0,b.jsx)(o.Z,{onClick:()=>{N.W.emit("start_conversation",{to:d,from:E})},children:(0,b.jsx)(P.Z,{})})})]})})},M=n.forwardRef((function(e,t){return(0,b.jsx)(C.Z,{direction:"up",ref:t,...e})})),G=()=>{const e=(0,R.I0)(),{users:t}=(0,R.v9)((e=>e.app));return(0,n.useEffect)((()=>{e((0,S.j4)())}),[]),(0,b.jsx)(b.Fragment,{children:t.map(((e,t)=>(0,b.jsx)(B,{...e},t)))})},H=()=>{const e=(0,R.I0)(),{friends:t}=(0,R.v9)((e=>e.app));return(0,n.useEffect)((()=>{e((0,S.f6)())}),[]),(0,b.jsx)(b.Fragment,{children:t.map(((e,t)=>(0,b.jsx)(A,{...e},t)))})},L=()=>{const e=(0,R.I0)(),{friendRequests:t}=(0,R.v9)((e=>e.app));return(0,n.useEffect)((()=>{e((0,S.HG)())}),[]),(0,b.jsx)(b.Fragment,{children:t.map(((e,t)=>(0,b.jsx)(O,{...e.sender,id:e._id},t)))})},T=e=>{let{open:t,handleClose:r}=e;const[i,a]=n.useState(0);return(0,b.jsxs)(k.Z,{fullWidth:!0,maxWidth:"xs",open:t,TransitionComponent:M,keepMounted:!0,onClose:r,"aria-describedby":"alert-dialog-slide-description",sx:{p:4},children:[(0,b.jsx)(s.Z,{p:2,sx:{width:"100%"},children:(0,b.jsxs)(I.Z,{value:i,onChange:(e,t)=>{a(t)},centered:!0,children:[(0,b.jsx)(y.Z,{label:"Explore"}),(0,b.jsx)(y.Z,{label:"Friends"}),(0,b.jsx)(y.Z,{label:"Requests"})]})}),(0,b.jsx)(_.Z,{children:(0,b.jsx)(s.Z,{sx:{height:"100%"},children:(0,b.jsx)(s.Z,{spacing:2.4,children:(()=>{switch(i){case 0:return(0,b.jsx)(G,{});case 1:return(0,b.jsx)(H,{});case 2:return(0,b.jsx)(L,{})}})()})})})]})};var D=r(94984);const J=window.localStorage.getItem("user_id"),K=()=>{const e=(0,g.Z)(),t=(0,j.Z)("up","md"),r=(0,R.I0)(),{conversations:m}=(0,R.v9)((e=>e.conversation.direct_chat));(0,n.useEffect)((()=>{N.W.emit("get_direct_conversations",{user_id:J},(e=>{console.log(e),r((0,D.Jj)({conversations:e}))}))}),[]);const[Z,C]=(0,n.useState)(!1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.Z,{sx:{position:"relative",height:"100%",width:t?320:"100vw",backgroundColor:"light"===e.palette.mode?"#F8FAFF":e.palette.background,boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.25)"},children:[!t&&(0,b.jsx)(f,{}),(0,b.jsxs)(s.Z,{p:3,spacing:2,sx:{maxHeight:"100vh"},children:[(0,b.jsxs)(s.Z,{alignItems:"center",justifyContent:"space-between",direction:"row",children:[(0,b.jsx)(a.Z,{variant:"h5",children:"Chats"}),(0,b.jsxs)(s.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,b.jsx)(o.Z,{onClick:()=>{C(!0)},sx:{width:"max-content"},children:(0,b.jsx)(d.Z,{})}),(0,b.jsx)(o.Z,{sx:{width:"max-content"},children:(0,b.jsx)(p.Z,{})})]})]}),(0,b.jsx)(s.Z,{sx:{width:"100%"},children:(0,b.jsxs)(w.ol,{children:[(0,b.jsx)(w.cB,{children:(0,b.jsx)(h.Z,{color:"#709CE6"})}),(0,b.jsx)(w.el,{placeholder:"Search\u2026",inputProps:{"aria-label":"search"}})]})}),(0,b.jsxs)(s.Z,{spacing:1,children:[(0,b.jsxs)(s.Z,{direction:"row",spacing:1.5,alignItems:"center",children:[(0,b.jsx)(x.Z,{size:24}),(0,b.jsx)(c.Z,{variant:"text",children:"Archive"})]}),(0,b.jsx)(l.Z,{})]}),(0,b.jsx)(s.Z,{sx:{flexGrow:1,overflow:"scroll",height:"100%"},children:(0,b.jsx)(u.l,{timeout:500,clickOnTrack:!1,children:(0,b.jsxs)(s.Z,{spacing:2.4,children:[(0,b.jsx)(a.Z,{variant:"subtitle2",sx:{color:"#676667"},children:"All Chats"}),m.filter((e=>!e.pinned)).map(((e,t)=>(0,b.jsx)(v.Z,{...e})))]})})})]})]}),Z&&(0,b.jsx)(T,{open:Z,handleClose:()=>{C(!1)}})]})}}}]);
//# sourceMappingURL=509.8f001bef.chunk.js.map